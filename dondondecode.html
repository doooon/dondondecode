<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>don don decode</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link rel="shortcut icon" href="favicon.ico">
    <script type="text/javascript" src="Lib_decode_basic.js"></script>
    <script type="text/javascript" src="Lib_decode.js"></script>
    <script type="text/javascript" src="Lib_decode_func.js"></script>
    <script type="text/javascript" src="Lib_decode_htmlCode.js"></script>
    <script type="text/javascript" src="Lib_一括func.js"></script>
	<script type="text/javascript">

		var docCookies = {
			// https://developer.mozilla.org/ja/docs/Web/API/Document/cookie

			getItem: function (sKey) {
				if (!sKey || !this.hasItem(sKey)) { return null; }
				return unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"), "$1"));
			},

			setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {
				if (!sKey || /^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)) { return; }
				var sExpires = "";
				if (vEnd) {
					switch (vEnd.constructor) {
					case Number:
						sExpires = vEnd === Infinity ? "; expires=Tue, 19 Jan 2038 03:14:07 GMT" : "; max-age=" + vEnd;
						break;
					case String:
						sExpires = "; expires=" + vEnd;
						break;
					case Date:
						sExpires = "; expires=" + vEnd.toGMTString();
						break;
					}
				}
				console.log(escape(sKey) + "=" + escape(sValue) + sExpires + (sDomain ? "; domain=" + sDomain : "") + (sPath ? "; path=" + sPath : "") + (bSecure ? "; secure" : ""));
				document.cookie = escape(sKey) + "=" + escape(sValue) + sExpires + (sDomain ? "; domain=" + sDomain : "") + (sPath ? "; path=" + sPath : "") + (bSecure ? "; secure" : "");
			},
		
			removeItem: function (sKey, sPath) {
				if (!sKey || !this.hasItem(sKey)) { return; }
				document.cookie = escape(sKey) + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT" + (sPath ? "; path=" + sPath : "");
			},
		
			hasItem: function (sKey) {
				return (new RegExp("(?:^|;\\s*)" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=")).test(document.cookie);
			},
		
			keys: /* optional method: you can safely remove it! */ function () {
				var aKeys = document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g, "").split(/\s*(?:\=[^;]*)?;\s*/);
				for (var nIdx = 0; nIdx < aKeys.length; nIdx++) { aKeys[nIdx] = unescape(aKeys[nIdx]); }
				return aKeys;
			}
		};



	  function decodeStart() {

			if (TEXT.match(/^\s*Passcode confirmed/)) {
				document.getElementById('clipboardTextarea').value=acquiredItems(TEXT);
			} else {

				//alert(TEXT);
				/*
				var expire = new Date();
				expire.setTime( expire.getTime() + 1000 * 3600 * 24 * 365 * 10);
				var cookieStr='TEXT='+encodeURIComponent(TEXT)+"; path=/dondondecode/; expires=" + expire.toUTCString();
				alert(cookieStr);
				document.cookie=cookieStr;
				*/

				// cookie保存
				var expire = new Date();
				expire.setTime( expire.getTime() + 1000 * 3600 * 24 * 365 * 10);
				/* docCookies.setItem(name, value[, end[, path[, domain[, secure]]]]) */
				//docCookies.setItem("dondondecode", TEXT, expire);
				docCookies.setItem("dondondecode", TEXT, 60*60*24*365*10);

				var meta = document.createElement("meta");
				meta.name = "format-detection";
				meta.content = "telephone=no";
				document.getElementsByTagName("head")[0].appendChild(meta);

				var script = document.createElement("script");
				script.src = "Lib_一括.js";
				document.getElementsByTagName("head")[0].appendChild(script);	  

				//w = window.open("test.html", "Test", "width=1500,height=1000");

				//var myDiv = document.getElementById('output');
				//console.log(html);
				//myDiv.textContent = html;


				/*
				w = window.open("test.html", "Test", "width=1500,height=1000");
				w.document.open();
				w.document.write(html);
				w.document.close();
				*/
			}
      

    }
	TEXT=""; //グローバル
    
	</script>
</head>
<body>
	<div>
		<form id="clipboardForm">
			<textarea id="clipboardTextarea" rows="5" onFocus="document.getElementById('clipboardTextarea').select()"></textarea>
			<input type="button" value="decode" onClick="TEXT=document.getElementById('clipboardTextarea').value; if(TEXT.match(/\S/)){this.disabled=true; document.getElementById('clearButton').disabled=true; document.getElementById('getCookieButton').disabled=true; decodeStart();} else {return null;}">
			<input type="button" value="relode" onClick="location.reload();">
			<input type="button" value="getCookie" id="getCookieButton" onClick="document.getElementById('clipboardTextarea').value=docCookies.getItem('dondondecode')">
			<input type="button" value="clear" id="clearButton" onClick="document.getElementById('clipboardTextarea').value=''">
		</form>
	</div>
	<div id="output">
	output area
	</div>
</body>
	<script type="text/javascript">
		var tmp=docCookies.getItem("dondondecode");
		document.getElementById('clipboardTextarea').value=tmp;
	</script>
</html>


